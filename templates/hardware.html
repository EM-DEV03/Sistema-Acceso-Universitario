{% extends "base.html" %}
{% block title %}Conectar Hardware{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card p-4">
            <h3>Conectar Hardware (Arduino/ESP32)</h3>
            <p>Esta sección está preparada para conectar dispositivos por puerto serie.<br>
            <button class="btn btn-primary" onclick="conectarSerial()">Conectar por puerto</button>
            <div id="serial-status" class="mt-3"></div>
        </div>
    </div>
</div>
<script>
async function conectarSerial() {
    if ("serial" in navigator) {
        try {
            const port = await navigator.serial.requestPort();
            await port.open({ baudRate: 9600 });
            document.getElementById('serial-status').innerHTML = '<span class="text-success">¡Conectado correctamente!</span>';
        } catch (e) {
            document.getElementById('serial-status').innerHTML = '<span class="text-danger">Error al conectar: ' + e + '</span>';
        }
    } else {
        document.getElementById('serial-status').innerHTML = '<span class="text-warning">Tu navegador no soporta Web Serial API.</span>';
    }
}
</script>
{% endblock %}
